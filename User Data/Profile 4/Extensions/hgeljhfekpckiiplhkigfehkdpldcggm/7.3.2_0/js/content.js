var chrome=chrome||browser,isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;function inject(){function e(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null}function t(e,t,n){var o=window.location.hostname;if(n>0){var i=new Date;i.setTime(i.getTime()+60*n*60*1e3);var a="; expires="+i.toGMTString()}else if(-1==n)a="; expires="+(new Date).toGMTString()+"; max-age=0";else a="";document.cookie=e+"="+encodeURIComponent(t)+a+"; path=/; domain="+o}(isFirefox?chrome.runtime:chrome.extension).onMessage.addListener(function(e,n,o){var i,a,r,s,l=new RegExp(e.checkme,"i");if("A"==e.pattern){var c=document.body.getElementsByTagName("*"),d="",u="no";let t=!1;1==e.autoclick&&(i='window.open = (s) => { window.postMessage({ type: "openWindow", value: s, inNewTab: '+e.inNewTab+'}, "*"); }',a=i,r=document.createElement("script"),s=document.createTextNode(a),r.appendChild(s),document.body.append(r));for(var m=0,f=c.length;m<f;m++)if("SCRIPT"!=c[m].tagName&&"STYLE"!=c[m].tagName&&null!=c[m].firstChild&&l.test(c[m].firstChild.nodeValue)){null!=c[m].closest("a")?d=c[m].closest("a").href:1==e.autoclick&&(c[m].click(),t=!0);let n=c[m].innerHTML,o=e.checkme,i=n.indexOf(o);i>=0&&(n=n.substring(0,i)+"<span style='background-color: #F7E706 !important;'>"+n.substring(i,i+o.length)+"</span>"+n.substring(i+o.length),c[m].innerHTML=n),u="yes";break}"yes"==u?t?o({findresult:"yes",url:null}):e.inNewTab&&1==e.autoclick?o({findresult:"yes",url:d}):(o({findresult:"yes"}),1==e.autoclick&&setTimeout(()=>{location.href=d},100)):o({})}else if("B"==e.pattern)l.test(document.body.innerHTML)?o({}):o({findresult:"yes"});else if("C"==e.pattern)t("arp_scroll_switch","1",12);else if("D"==e.pattern)t("arp_scroll_switch","0",-1),t("arp_scroll_position",0,-1);else if("E"==e.pattern){let t=new RegExp(e.words,"i"),n=document.body.getElementsByTagName("*"),i="no";for(m=0,f=n.length;m<f;m++)if("SCRIPT"!=n[m].tagName&&"STYLE"!=n[m].tagName&&null!=n[m].firstChild&&t.test(n[m].firstChild.nodeValue)){i="yes";break}o({predefinedText:i})}});var n=e("arp_scroll_switch");if(n&&"1"==n){var o=e("arp_scroll_position");window.scrollTo(0,o)}window.addEventListener("scroll",function(){t("arp_scroll_position",window.pageYOffset,6)},!1),chrome.runtime.onMessage.addListener(function(e){"location_replace"==e.name&&window.location.replace(e.data)}),document.URL.indexOf("blank.html")>-1&&window.history.back()}window.addEventListener("message",function(e){e.source==window&&"openWindow"==e.data.type&&(e.data.inNewTab?window.open(e.data.value):location.href=e.data.value)});try{document.documentElement.hasAttribute("data-arp-injected")||(document.documentElement.setAttribute("data-arp-injected","true"),inject())}catch(e){}